<?xml version="1.0"?>
<launch>
  
  <!-- Arguments -->
  <arg name="pylon_node_name0" default="pylon_camera_node0" />
  <arg name="pylon_node_name1" default="pylon_camera_node1" />

  
  <!-- Static tranformations: https://wiki.ros.org/tf2_ros -->
  <node pkg="tf2_ros" type="static_transform_publisher" name="right_broadcaster" args="0 0 0 0 0 0 base_link right_camera" />
  <node pkg="tf2_ros" type="static_transform_publisher" name="left_broadcaster" args="0 0.04 0 0 0 0  base_link left_camera" />
  <node pkg="tf2_ros" type="static_transform_publisher" name="smartphone_broadcaster" args="0 -0.3 0 0 0 0  base_link smart_camera" />
  <node pkg="tf2_ros" type="static_transform_publisher" name="velodyne_broadcaster" args="0.221207 -0.658529 0.109923 0 0 0  base_link velodyne" />
  <node pkg="tf2_ros" type="static_transform_publisher" name="azure_broadcaster" args="0 0.3 0 0 0 0  base_link azure" />
  <node pkg="tf2_ros" type="static_transform_publisher" name="mcu_imu_broadcaster" args="-0.1 0.2 0 0 0 0  base_link mcu_imu" />
  
  <!-- Velodyne lidar-->
  <group ns="velodyne">
      <include file="$(find velodyne_pointcloud)/launch/VLP16_points.launch"/>
  </group>
  
  <!-- Basler cameras-->
  <!--
  <group ns="basler">
  <include file="$(find data_collection)/launch/basler.launch">
  	<arg name="device_user_id" value="cam0" />
  	<arg name="node_name" value="$(arg pylon_node_name0)" />
  </include>
  <include file="$(find data_collection)/launch/basler.launch">
  	<arg name="device_user_id" value="cam1" />
  	<arg name="node_name" value="$(arg pylon_node_name1)" />
  </include>
  </group>
  -->

  <!-- Azure camera-->
  <group ns="azure">
  <include file="$(find data_collection)/launch/azure.launch" >
    <arg name="fps" value="5" />
    <arg name="wired_sync_mode" value="2"/>
  </include>
  </group>


  <!-- MCU and IMU-->
  <group ns="mcu">
  <node pkg="mcu_interface" type="mcu" name="mcu" args="/dev/ttyUSB0"/>
  </group>

  <!-- For debugging -->
<!--  
  <node pkg="image_view" type="image_view" name="$(arg pylon_node_name0)_image_view" args="image:=/$(arg pylon_node_name0)/image_raw _image_transport:=theora" />
  <node pkg="image_view" type="image_view" name="$(arg pylon_node_name1)_image_view" args="image:=/$(arg pylon_node_name1)/image_raw _image_transport:=theora" />
  -->
  <!--
  <node pkg="image_view" type="image_view" name="azure_image_view" args="image:=/depth/image_raw" />
  -->

</launch>
